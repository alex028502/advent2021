name: Advent of Code 2021

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-python@v2
      with:
        python-version: 3.8.10
    - name: Update
      run: sudo apt-get update
    - name: Install racket
      run: sudo apt-get install -y racket
    - name: find out racket version we randomly chose
      run: racket --version
    - name: list raco packages in case something is missing
      run: raco pkg show --all
    - name: Install testing stuff
      run: python -m venv venv && venv/bin/pip install -r requirements.txt
    - name: Tests
      run: venv/bin/pytest -vv
    - name: Format Tests
      run: venv/bin/black . --check
    - name: practice round (day 1 from 2020)
      run: racket 00/original.rkt 00/data.txt
    - name: practice round (second attempt)
      run: racket 00/recursive.rkt 00/data.txt
    - name: day 1 part i
      run: racket 01/original.rkt 01/data.txt
    - name: day 1 part i (redo)
      run: racket 01/recursive.rkt 1 01/data.txt
    - name: day 1 part ii
      run: racket 01/recursive.rkt 1 01/data.txt
    - name: day 2 part i
      run: racket 02/program.rkt 02/input.txt
    - name: day 2 part i again
      run: racket 02/again.rkt 02/input.txt
    - name: day 2 part ii
      run: racket 02/part-ii.rkt 02/input.txt
    - name: day 3 parts i & ii
      run: racket 03/program.rkt 03/input.txt
    - name: day 4 parts i & ii
      run: racket 04/program.rkt 04/data.txt
    - name: day 6 part i racket
      run: racket 06/program.rkt 80 06/input.txt
    - name: day 6 part i python
      run: venv/bin/python 06/program.py 80 06/input.txt
    - name: day 6 part ii racket
      run: racket 06/program.rkt 256 06/input.txt
    - name: day 6 part ii python
      run: venv/bin/python 06/program.py 256 06/input.txt
    - name: day 7 part i & ii
      run: racket 07/program.rkt 07/input.txt
    - name: day 8 part i & ii
      run: racket 08/program.rkt 08/input.txt
    - name: day 9
      run: racket 09/program.rkt 09/input.txt
    - name: day 10
      run: racket 10/program.rkt 10/input.txt
    - name: day 11 part i
      run: racket 11/program.rkt 100 11/input.txt
    - name: day 11 part ii
      run: racket 11/program.rkt --predict-synchroflash 11/input.txt
    - name: day 12 part i
      run: racket 12/program.rkt i 12/input.txt
    - name: day 12 part ii
      run: racket 12/program.rkt ii 12/input.txt
    - name: day 13 part i
      run: racket 13/program.rkt ii 13/input.txt
